---
layout: default
title: API
parent: HTML
nav_order: 6
---

# HTML API
{: .no_toc .text-beta .fw-700}

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## Geolocation API

**locate a user's position**

### Using HTML Geolocation

* getCurrentPosition() : used to return the user's position

    ```html
    <button onclick="getLocation()">Click the button to get your coordinates</button>

    <p id="demo"></p>

    <script>
    var x = document.getElementById("demo");
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
      } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
      }
    }

    function showPosition(position) {
      x.innerHTML = "Latitude: " + position.coords.latitude +
      "<br>Longitude: " + position.coords.longitude;
    }
    </script>
    ```

[W3C Example](https://www.w3schools.com/html/tryit.asp?filename=tryhtml5_geolocation)

### Handling Errors and Rejections

getCurrentPosition()메소드 의 두 번째 매개 변수는 오류를 처리하는 데 사용됨

사용자의 위치를 얻지 못하면 실행할 함수를 지정합니다

```html
<button onclick="getLocation()">Try It</button>

<p id="demo"></p>

<script>
var x = document.getElementById("demo");

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition, showError);
  } else { 
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}

function showPosition(position) {
  x.innerHTML = "Latitude: " + position.coords.latitude + 
  "<br>Longitude: " + position.coords.longitude;
}

function showError(error) {
  switch(error.code) {
    case error.PERMISSION_DENIED:
      x.innerHTML = "User denied the request for Geolocation."
      break;
    case error.POSITION_UNAVAILABLE:
      x.innerHTML = "Location information is unavailable."
      break;
    case error.TIMEOUT:
      x.innerHTML = "The request to get user location timed out."
      break;
    case error.UNKNOWN_ERROR:
      x.innerHTML = "An unknown error occurred."
      break;
  }
}
</script>
```

[W3C Example](https://www.w3schools.com/html/tryit.asp?filename=tryhtml5_geolocation_error)

### Displaying the Result in a Map

맵을 표시하려면 맵 서비스를 이용해야함 

네이버, 다음(best), 구글에서 지원함 (구글은 유료)

<span class="fs-2 mt-3">
[Daum Kakao API](https://apis.map.kakao.com/){: .btn  .btn-outline}
</span>

---

## Drag and Drop API

### Drag and Drop Example

```html
<script>
function allowDrop(ev) {
  ev.preventDefault();
}

function drag(ev) {
  ev.dataTransfer.setData("text", ev.target.id);
}

function drop(ev) {
  ev.preventDefault();
  var data = ev.dataTransfer.getData("text");
  ev.target.appendChild(document.getElementById(data));
}
</script>
</head>
<body>

<p>Drag the W3Schools image into the rectangle:</p>

<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<br>
<img id="drag1" src="img_logo.gif" draggable="true" ondragstart="drag(event)" width="336" height="69">
```

### Drag and Drop Explain

1. 요소를 Draggable 하게 만들기

    ```html
    <img draggable="true">
    ```
    
2. ondragstart and setData()로 무엇을 드래그할지 설정하기

    ```html
    <script>
    function drag(ev) {
      ev.dataTransfer.setData("text", ev.target.id);
    }
    </script>
    
    <img draggable="true" ondragstart="drag(event)">
    ```

    ondragstart : 함수를 부르고, 드래그할 데이터를 지정함
    
    dataTransfer.setData() : 데이터 유형, 드래그 된 데이터의 값을 설정
    
3. ondragover로 어디에 드롭할지 설정하기

    ondragover : 드래그 한 데이터를 놓을 수있는 위치를 지정
    
    event.preventDefault() : 기본적으로 데이터 / 요소는 다른 요소에서 삭제할 수 없어서 드롭을 허용하려면 요소의 기본 처리를 방지해야하기 위해 사용
    
4. ondrop 으로 드롭하기
    
    드롭한 후 드롭 이벤트 처리하기
    
    ```js
    function drop(ev) {
      ev.preventDefault();
      var data = ev.dataTransfer.getData("text");
      ev.target.appendChild(document.getElementById(data));
    }
    ```

[W3C Example](https://www.w3schools.com/html/tryit.asp?filename=tryhtml5_draganddrop2)
    
---

## Web Storage API